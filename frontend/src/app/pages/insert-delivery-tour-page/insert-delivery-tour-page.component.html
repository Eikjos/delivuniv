<app-header></app-header>
<div>
  <div class="float-left absolute left-10">
  <button class="bg-[#ffaa33] p-2 rounded-lg mt-3 px-4" (click)="onBack()">Retour</button>
  </div>
  <h2 class="text-2xl text-center mt-5">Création d'une tournée</h2>
  <form class="mt-10 flex flex-col justify-center items-center" (ngSubmit)="onSubmit()" [formGroup]="form">
    <div class="w-[400px]">
      <div class="flex justify-center flex-row items-center gap-6">
        <label for="name">Nom : </label>
        <input type="text" placeholder="Nom de la tournée" name="name" class="border-2 border-gray-500 outline-none p-2 rounded-md my-3 w-[250px]"
          formControlName="name" required />
      </div> 
      <div *ngIf="nameControl.invalid && (submitted || (nameControl.dirty || nameControl.touched))"
        class="alert alert-danger">
        <div *ngIf="nameControl.errors?.['required']" class="text-red-700 text-center ml-5 mb-2">
          Nom de la tournée est requis
        </div>
      </div>
    </div>
    <div class="w-[400px]">
      <div class="flex justify-center flex-row items-center gap-4">
        <label for="name">Début : </label>
        <input type="text" placeholder="Date du début" name="startDate" class="border-2 border-gray-500 outline-none p-2 rounded-md my-3 w-[250px]"
          formControlName="startDate" required (change)="onChangeStartDate($event)"              
          (focus)="onFocus($event)"
          (blur)="onBlur($event)"/>
      </div>
      <div *ngIf="startControl.invalid && (submitted || (startControl.dirty || startControl.touched))"
        class="alert alert-danger">
        <div *ngIf="startControl.errors?.['required']" class="text-red-700 text-center ml-5 mb-2">
          La date de début de la tournée est requis
        </div>
      </div>
    </div>
    <div class="w-[400px]">
      <div class="flex justify-center flex-row items-center gap-9">
        <label for="name">Fin : </label>
        <input type="text" placeholder="Date de fin" name="endDate" class="border-2 border-gray-500 outline-none p-2 rounded-md my-3 w-[250px]"
          formControlName="endDate" required [min]="startDate"                
          (focus)="onFocus($event)"
          (blur)="onBlur($event)"/>
      </div>
      <div *ngIf="endControl.invalid && (submitted || (endControl.dirty || endControl.touched))"
        class="alert alert-danger">
        <div *ngIf="endControl.errors?.['required']" class="text-red-700 text-center ml-5 mb-2">
          La date de fin de la tournée est requis
        </div>
      </div>
    </div>
    <div class="w-[400px]">
      <div class="flex justify-center flex-row items-center gap-2">
        <label for="name">Livreur :</label>
        <select name="deliveryPerson"
          class="border-2 border-gray-500 outline-none p-2 rounded-md my-3 h-10 w-[250px]" formControlName="deliveryPersonId">
          <option *ngFor="let item of deliveryPersons" [value]="item.id">{{item.name}}</option>
        </select>
      </div>
    </div>
    <button type="submit" class="bg-[#ffaa33] p-2 rounded-lg mt-3 px-4">Créer</button>
    <div *ngIf="error" class="mt-3">
      <p class="text-center text-red-700">{{error}}</p>
    </div>
  </form>
</div>